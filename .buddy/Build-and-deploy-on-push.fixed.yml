- pipeline: build-and-deploy-on-push
  name: Build and deploy on push
  refs:
  - refs/heads/main
  fail_on_prepare_env_warning: true
  resources: NANO
  events:
  - type: WEBHOOK
  actions:
  - action: Run Unit Tests
    type: BUILD
    execute_commands:
    - pip install -r requirements.txt
    - python3 tests.py
    cached_dirs:
    - /root/.cache/pip
    shell: BASH
    docker_image_name: library/python
    docker_image_tag: 3.14.2
  - action: Lint Dockerfile
    type: DOCKERFILE_LINTER
    local_path: Dockerfile
    shell_type: sh
  - action: Build Docker image
    type: DOCKERFILE
    do_not_prune_images: true
  - action: Run Docker Container
    type: RUN_DOCKER_CONTAINER
    mount_filesystem_disable: true
    volume_mappings: []
    image_location: ACTION
    docker_registry: DOCKER_HUB
